# 认证问题根因分析与解决方案

## 根因
- 前端进入首页时自动附带 `Authorization`，本地令牌失效/不合法导致后端解析异常返回 403。
- 后端 JWT 密钥未配置或长度不足（终端日志显示 0-bit），令牌生成/验证失败，导致即使正确凭据也无法正常登录或访问需要鉴权的端点。
- 作者榜为空源于公共接口被无效令牌污染而被 403 拦截。

## 解决方案
- 前端：
  - 对公共接口建立白名单，不附加 `Authorization`（`frontend/src/utils/axios.ts`）。
  - 在请求拦截器校验令牌本地有效性（解析 payload `exp`），无效则清理并不附加头。
  - 在响应拦截器对 `401/403` 统一处理，清空本地并跳转登录。
- 后端：
  - 配置符合规范的 `jwt.secret`（Base64 编码，≥32 字节），并在 `JWTUtils` 校验长度。
  - `JwtAuthenticationFilter` 对解析失败容错，不拦截公开端点，保证公共数据可访问。
  - `SecurityConfig` 公开端点 `permitAll()` 顺序正确。

## 验证
- 首页公共接口不再附带令牌，加载文章列表与作者榜成功。
- 登录后访问需要鉴权的操作（关注、点赞）携带有效令牌，权限控制正确。
- 无回归：刷新令牌、退出登录、个人资料更新流程正常。
